import{r as p,o as w,c as n,a as r,b as s,d as f,w as k,v as L,u as c,s as i,t as u,F as C,e as D,n as B}from"./index-6h8_Kgxn.js";import{_ as T,a as _,g as E}from"./_plugin-vue_export-helper-Bb7mbNmN.js";function A(m,l=300){let a;return(...d)=>{clearTimeout(a),a=setTimeout(()=>m(...d),l)}}const F={class:"container py-4"},I={class:"row g-2 mb-3"},P={class:"col-12"},$={class:"input-group"},V={class:"col-6 col-md-3"},j=["value"],q={class:"col-6 col-md-3"},M=["value"],N={key:0,class:"alert alert-info"},U={key:1,class:"alert alert-danger"},z={class:"row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4"},O={class:"card h-100 shadow-sm rounded-3 hover-card"},R=["src","onError"],G={key:1,class:"thumb d-flex justify-content-center align-items-center bg-body-tertiary"},H={class:"card-body"},J={class:"card-title mb-2 text-light"},K={class:"location-info d-flex align-items-center mb-2"},Q={class:"location-text"},W={class:"list-group list-group-flush"},X={class:"list-group-item"},Y={class:"list-group-item"},Z={class:"card-footer bg-transparent"},ss=["disabled","onClick"],ts={__name:"LessonsPage",setup(m){const l=p(!1),a=p(""),d=p("");async function v(){l.value=!0,a.value="";try{i.lessons=await _.getLessons()}catch(e){a.value=String(e.message||e)}finally{l.value=!1}}const g=A(async()=>{const e=d.value.trim();if(!e)return v();l.value=!0,a.value="";try{i.lessons=await _.searchLessons(e)}catch(t){a.value=String(t.message||t)}finally{l.value=!1}},300);function b(e){e.space>0&&(i.cartItems.push({...e}),e.space-=1)}function h(e){i.sortBy=e.target.value}function y(e){i.sortDir=e.target.value}function x(e){return e.image?`https://cst3144-express-app.onrender.com/images/${e.image}`:""}return w(v),(e,t)=>(r(),n("div",F,[t[9]||(t[9]=s("h2",{class:"h3 text-light mb-3"},"Lessons",-1)),s("div",I,[s("div",P,[s("div",$,[t[2]||(t[2]=s("span",{class:"input-group-text bg-transparent text-secondary border-secondary"},[s("i",{class:"fa-solid fa-magnifying-glass"})],-1)),k(s("input",{class:"form-control","onUpdate:modelValue":t[0]||(t[0]=o=>d.value=o),onInput:t[1]||(t[1]=(...o)=>c(g)&&c(g)(...o)),placeholder:"Search activity, location, price, spaces..."},null,544),[[L,d.value]])])]),s("div",V,[t[4]||(t[4]=s("label",{class:"form-label"},"Sort by",-1)),s("select",{class:"form-select",value:c(i).sortBy,onChange:h},[...t[3]||(t[3]=[s("option",{value:"topic"},"Subject",-1),s("option",{value:"location"},"Location",-1),s("option",{value:"price"},"Price",-1),s("option",{value:"space"},"Spaces",-1)])],40,j)]),s("div",q,[t[6]||(t[6]=s("label",{class:"form-label"},"Order",-1)),s("select",{class:"form-select",value:c(i).sortDir,onChange:y},[...t[5]||(t[5]=[s("option",{value:"asc"},"Ascending",-1),s("option",{value:"desc"},"Descending",-1)])],40,M)])]),l.value?(r(),n("div",N,"Loading…")):f("",!0),a.value?(r(),n("div",U,u(a.value),1)):f("",!0),s("div",z,[(r(!0),n(C,null,D(c(i).sortedLessons,o=>(r(),n("div",{key:o._id,class:"col"},[s("div",O,[o.image?(r(),n("img",{key:0,class:"card-img-top thumb",src:x(o),alt:"",onError:S=>o.image=""},null,40,R)):(r(),n("div",G,[s("i",{class:B([c(E)(o.topic),"fa-4x text-secondary"])},null,2)])),t[8]||(t[8]=s("div",{class:"position-absolute m-2 pill"},"FEATURED",-1)),s("div",H,[s("h5",J,u(o.topic),1),s("div",K,[t[7]||(t[7]=s("i",{class:"fa-solid fa-map-marker-alt me-2 text-brand"},null,-1)),s("span",Q,u(o.location),1)])]),s("ul",W,[s("li",X,"Price: £"+u(o.price),1),s("li",Y,"Spaces: "+u(o.space),1)]),s("div",Z,[s("button",{class:"btn btn-brand w-100",disabled:o.space<=0,onClick:S=>b(o)}," Add to Cart ",8,ss)])])]))),128))])]))}},as=T(ts,[["__scopeId","data-v-5f19f987"]]);export{as as default};
