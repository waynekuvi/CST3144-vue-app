import{r as g,o as C,c as r,a as i,b as s,d as f,w as E,v as L,u as p,F as _,e as y,s as n,t as d,n as D}from"./index-BYqo0DnC.js";import{a as b}from"./api-BU1MpDmd.js";function B(u,l=300){let a;return(...c)=>{clearTimeout(a),a=setTimeout(()=>u(...c),l)}}const A=(u,l)=>{const a=u.__vccOpts||u;for(const[c,v]of l)a[c]=v;return a},R={class:"container py-4"},T={class:"row g-2 mb-3"},I={class:"col-12"},P={class:"input-group"},V={class:"col-12 d-flex gap-2 flex-wrap mt-2"},$={class:"col-6 col-md-3"},F=["value"],N={class:"col-6 col-md-3"},O=["value"],U={key:0,class:"alert alert-info"},j={key:1,class:"alert alert-danger"},q={class:"row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4"},M={class:"card h-100 shadow-sm rounded-3 hover-card"},z=["src","onError"],Y={key:1,class:"thumb d-flex justify-content-center align-items-center bg-body-tertiary"},G={class:"card-body"},H={class:"card-title mb-1 text-light"},J={class:"text-muted"},K={class:"list-group list-group-flush"},Q={class:"list-group-item"},W={class:"list-group-item"},X={class:"card-footer bg-transparent"},Z=["disabled","onClick"],ss={__name:"LessonsPage",setup(u){const l=g(!1),a=g(""),c=g("");async function v(){l.value=!0,a.value="";try{n.lessons=await b.getLessons()}catch(e){a.value=String(e.message||e)}finally{l.value=!1}}const m=B(async()=>{const e=c.value.trim();if(!e)return v();l.value=!0,a.value="";try{n.lessons=await b.searchLessons(e)}catch(t){a.value=String(t.message||t)}finally{l.value=!1}},300);function h(e){e.space>0&&(n.cartItems.push({...e}),e.space-=1)}function x(e){n.sortBy=e.target.value}function S(e){n.sortDir=e.target.value}function k(e){return e.image?`https://YOUR-RENDER-SERVICE.onrender.com/images/${e.image}`:""}return C(v),(e,t)=>(i(),r("div",R,[t[9]||(t[9]=s("h2",{class:"h3 text-light mb-3"},"Lessons",-1)),s("div",T,[s("div",I,[s("div",P,[t[2]||(t[2]=s("span",{class:"input-group-text bg-transparent text-secondary border-secondary"},[s("i",{class:"fa-solid fa-magnifying-glass"})],-1)),E(s("input",{class:"form-control","onUpdate:modelValue":t[0]||(t[0]=o=>c.value=o),onInput:t[1]||(t[1]=(...o)=>p(m)&&p(m)(...o)),placeholder:"Search activity, location, price, spaces..."},null,544),[[L,c.value]])])]),s("div",V,[(i(!0),r(_,null,y(e.categories,o=>(i(),r("span",{key:o,class:D(["pill",{"badge-featured":o==="All"}])},d(o),3))),128))]),s("div",$,[t[4]||(t[4]=s("label",{class:"form-label"},"Sort by",-1)),s("select",{class:"form-select",value:p(n).sortBy,onChange:x},[...t[3]||(t[3]=[s("option",{value:"topic"},"Subject",-1),s("option",{value:"location"},"Location",-1),s("option",{value:"price"},"Price",-1),s("option",{value:"space"},"Spaces",-1)])],40,F)]),s("div",N,[t[6]||(t[6]=s("label",{class:"form-label"},"Order",-1)),s("select",{class:"form-select",value:p(n).sortDir,onChange:S},[...t[5]||(t[5]=[s("option",{value:"asc"},"Ascending",-1),s("option",{value:"desc"},"Descending",-1)])],40,O)])]),l.value?(i(),r("div",U,"Loading…")):f("",!0),a.value?(i(),r("div",j,d(a.value),1)):f("",!0),s("div",q,[(i(!0),r(_,null,y(p(n).sortedLessons,o=>(i(),r("div",{key:o._id,class:"col"},[s("div",M,[o.image?(i(),r("img",{key:0,class:"card-img-top thumb",src:k(o),alt:"",onError:w=>o.image=""},null,40,z)):(i(),r("div",Y,[...t[7]||(t[7]=[s("i",{class:"fa-solid fa-book fa-2xl text-secondary"},null,-1)])])),t[8]||(t[8]=s("div",{class:"position-absolute m-2 pill"},"FEATURED",-1)),s("div",G,[s("h5",H,d(o.topic),1),s("div",J,d(o.location),1)]),s("ul",K,[s("li",Q,"Price: £"+d(o.price),1),s("li",W,"Spaces: "+d(o.space),1)]),s("div",X,[s("button",{class:"btn btn-brand w-100",disabled:o.space<=0,onClick:w=>h(o)}," Add to Cart ",8,Z)])])]))),128))])]))}},os=A(ss,[["__scopeId","data-v-29f858f3"]]);export{os as default};
